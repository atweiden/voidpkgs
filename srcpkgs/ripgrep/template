maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="ripgrep"
version=0.9.0
revision=1
short_desc="Fast search tool inspired by ag and grep"
hostmakedepends+=" asciidoc"
hostmakedepends+=" cargo"
hostmakedepends+=" rust"
homepage="https://github.com/BurntSushi/ripgrep/"
license="Public Domain, MIT"
distfiles="https://github.com/BurntSushi/${pkgname}/archive/${version}.tar.gz"
checksum="871a24ad29a4c5b6d82f6049156db2662e6a9820cca6f361547b8ab8bc1be7ae"
nocross="yes"

do_build() {
  cargo build --release
}

do_check() {
  cargo test --release
}

do_install() {
  vbin target/release/rg
}

post_install() {
  vlicense LICENSE-MIT
  vlicense UNLICENSE
  vman rg.1
  cd target/release/build/ripgrep-*/out
  vinstall rg.bash 0644 usr/share/bash-completion/completions rg
  vinstall rg.fish 0644 usr/share/fish/completions
  vinstall complete/_rg 0644 usr/share/zsh/site-functions
}

# vim: set filetype=sh foldmethod=marker foldlevel=0:
