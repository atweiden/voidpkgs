maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="neovim"
version=0.3.1
revision=1
short_desc="Fork of Vim aiming to improve user experience, plugins and GUIs"
makedepends+=" libtermkey-devel"
makedepends+=" libuv-devel"
makedepends+=" libvterm-devel"
makedepends+=" msgpack-devel"
hostmakedepends+=" LuaJIT-devel"
hostmakedepends+=" gperf"
hostmakedepends+=" lua51-lpeg"
hostmakedepends+=" lua51-mpack"
hostmakedepends+=" pkg-config"
homepage="http://neovim.io"
license="Apache-2.0, GPL-2"
distfiles="https://github.com/$pkgname/$pkgname/archive/v$version.tar.gz"
checksum="bc5e392d4c076407906ccecbc283e1a44b7832c2f486cad81aa04cc29973ad22"
build_style="cmake"
configure_args+=" -DENABLE_JEMALLOC=0"
configure_args+=" -DUSE_BUNDLED_LIBTERMKEY=OFF"
# neovim needs host bin to generate helptags at build time
nocross="yes"
alternatives+=" vi:vi.1:/usr/share/man/man1/nvim.1"
alternatives+=" vi:vi:/usr/bin/nvim"
alternatives+=" vi:view.1:/usr/share/man/man1/nvim.1"
alternatives+=" vi:view:/usr/bin/nvim"
alternatives+=" vim:vim.1:/usr/share/man/man1/nvim.1"
alternatives+=" vim:vim:/usr/bin/nvim"

do_check() {
  # requires downloading stuff from the outside and also adds deps:
  # - automake
  # - curl
  # - libtool
  # - unzip
  :
}

post_install() {
  # remove nvim.desktop
  rm -rf "$DESTDIR/usr/share/applications"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
