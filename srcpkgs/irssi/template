maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="irssi"
version=1.1.2
revision=1
short_desc="Secure and modular IRC client with text mode user interface"
depends="ca-certificates"
makedepends+=" libglib-devel"
makedepends+=" libressl-devel"
makedepends+=" ncurses-devel"
hostmakedepends="pkg-config"
homepage="https://www.irssi.org"
license="GPL-2.0-or-later"
distfiles="https://github.com/irssi/irssi/releases/download/$version/$pkgname-$version.tar.gz"
checksum="db7d9ec271c13a28e28af9d72656f61849de88e2592cbb7530768da614697049"
conf_files="/etc/irssi.conf"
build_style="gnu-configure"
configure_args+=" --disable-static"
configure_args+=" --enable-true-color"
configure_args+=" --with-proxy"
subpackages+=" irssi-devel"

LDFLAGS="-lncursesw"

if [[ -z "$CROSS_BUILD" ]]; then
  configure_args+=" --with-perl=module"
  subpackages+=" irssi-perl"
  makedepends+=" perl"
fi

irssi-perl_package() {
  depends="irssi"
  short_desc+=" - perl support"
  pkg_install() {
    vmove usr/lib/perl5
    vmove "usr/lib/irssi/modules/*perl*"
    vmove usr/share/irssi/scripts
  }
}

irssi-devel_package() {
  depends="$makedepends"
  short_desc+=" - development files"
  pkg_install() {
    vmove usr/include
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
