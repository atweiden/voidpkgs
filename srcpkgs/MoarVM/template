maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="MoarVM"
version=2018.06
revision=1
short_desc="MoarVM is a virtual machine for Rakudo Perl 6"
makedepends+=" libatomic_ops-devel"
makedepends+=" libffi-devel"
makedepends+=" libtommath-devel"
makedepends+=" libuv-devel"
hostmakedepends="perl"
homepage="http://moarvm.com"
license="Artistic-2.0"
distfiles="https://moarvm.org/releases/$pkgname-$version.tar.gz"
checksum="6eb8ffc8966151a8031c02abd78325fbe9ebeb0b835a5b7a9985ea3b25ca39a8"
build_style="configure"
configure_script="perl Configure.pl"
configure_args+=" --prefix=/usr"
configure_args+=" --has-libuv"
configure_args+=" --has-libatomic_ops"
configure_args+=" --has-libffi"
configure_args+=" --has-libtommath"
nocross="yes"
shlib_provides="libmoar.so"

do_clean() {
  rm -rf "$DESTDIR/usr/include/libtommath"
  rm -rf "$DESTDIR/usr/include/libuv"
}
