maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="musl-fts"
version=1.2.7
revision=3
short_desc="Implementation of fts(3) for musl libc"
only_for_archs+=" aarch64-musl"
only_for_archs+=" armv5tel-musl"
only_for_archs+=" armv6l-musl"
only_for_archs+=" armv7l-musl"
only_for_archs+=" i686-musl"
only_for_archs+=" mips-musl"
only_for_archs+=" mipsel-musl"
only_for_archs+=" mipselhf-musl"
only_for_archs+=" mipshf-musl"
only_for_archs+=" ppc-musl"
only_for_archs+=" ppc64-musl"
only_for_archs+=" ppc64le-musl"
only_for_archs+=" x86_64-musl"
hostmakedepends+=" automake"
hostmakedepends+=" libtool"
homepage="https://github.com/pullmoll/musl-fts"
license="BSD"
distfiles="https://github.com/pullmoll/musl-fts/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="49ae567a96dbab22823d045ffebe0d6b14b9b799925e9ca9274d47d26ff482a6"
build_style="gnu-configure"

pre_configure() {
  sed \
    -i \
    -e "/pkgconfig_DATA/i pkgconfigdir=\$(libdir)/pkgconfig" \
    Makefile.am
  ./bootstrap.sh
}

post_install() {
  vinstall "$pkgname.pc" 644 usr/lib/pkgconfig
  vlicense COPYING
  vman fts.3 musl-fts.3
}

musl-fts-devel_package() {
  short_desc+=" - development files"
  depends="$sourcepkg-${version}_$revision"
  pkg_install() {
    vmove usr/share/man
    vmove usr/include
    vmove "usr/lib/*.a"
    vmove "usr/lib/*.so"
    vmove usr/lib/pkgconfig
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
