maintainer="nox"
pkgname="python3-drgn"
version=0.0.20
revision=1
short_desc="Scriptable debugger library"
depends="python3"
makedepends+=" elfutils-devel"
makedepends+=" libgomp-devel"
makedepends+=" libkdumpfile-devel"
makedepends+=" python3-devel"
hostmakedepends+=" automake"
hostmakedepends+=" libtool"
hostmakedepends+=" pkg-config"
hostmakedepends+=" python3-setuptools"
homepage="https://github.com/osandov/drgn/"
license="GPL-3.0-or-later"
distfiles="https://github.com/osandov/drgn/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="d67ef65a2a9a27059d7abda38c5628a76060173772d19d439b05409eb96ca6e6"
wrksrc="drgn-$version"
build_style="python3-module"

pre_build() {
  local _flags
  _flags+=" --host=$XBPS_CROSS_TRIPLET"
  _flags+=" --with-libtool-sysroot=$XBPS_CROSS_BASE"
  if [[ -n "$CROSS_BUILD" ]]; then
    export CONFIGURE_FLAGS="$_flags"
  fi
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
