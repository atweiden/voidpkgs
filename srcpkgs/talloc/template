maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="talloc"
version=2.1.14
revision=1
short_desc="Hierarchical pool based memory allocator with destructors"
hostmakedepends+=" docbook-xsl"
hostmakedepends+=" libxslt"
hostmakedepends+=" pkg-config"
hostmakedepends+=" python"
homepage="https://talloc.samba.org/"
license="GPL-3.0-or-later"
distfiles="http://samba.org/ftp/$pkgname/$pkgname-$version.tar.gz"
checksum="b185602756a628bac507fa8af8b9df92ace69d27c0add5dab93190ad7c3367ce"
build_style="configure"

do_configure() {
  if [[ -n "$CROSS_BUILD" ]]; then
    cp "$FILESDIR/cross-32bit.answers" .
    _args+=" --cross-answers='cross-32bit.answers'"
    _args+=" --cross-compile"
    _args+=" --hostcc=cc"
  fi
  ./configure \
    "$_args" \
    --disable-python \
    --prefix="/usr"
}

talloc-devel_package() {
  depends="$sourcepkg-${version}_$revision"
  short_desc+=" - development files"
  pkg_install() {
    vmove usr/include
    vmove usr/lib/pkgconfig
    vmove usr/lib/libtalloc.so
    vmove usr/share/man/man3
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0:
