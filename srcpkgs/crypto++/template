maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="crypto++"
version=565
revision=3
short_desc="A free C++ class library of cryptographic schemes"
hostmakedepends="unzip"
homepage="http://www.cryptopp.com/"
license="Boost Software License 1.0, Public domain"
distfiles="http://www.cryptopp.com/cryptopp$version.zip"
checksum="a75ef486fe3128008bbb201efee3dcdcffbe791120952910883b26337ec32c34"
build_style="gnu-makefile"
make_build_target+=" libcryptopp.a"
make_build_target+=" libcryptopp.so"
create_wrksrc="yes"

CXXFLAGS+=" -DNDEBUG"
CXXFLAGS+=" -fPIC"

post_extract() {
  sed \
    -i \
    -e 's/^CXXFLAGS/#CXXFLAGS/' \
    GNUmakefile
}

post_install() {
  vinstall "$FILESDIR/libcrypto++.pc" 644 usr/lib/pkgconfig
  sed \
    -i \
    -e "s,@@VERSION@@,$version,g" \
    "$DESTDIR/usr/lib/pkgconfig/libcrypto++.pc"
  vlicense License.txt LICENSE
}

crypto++-devel_package() {
  depends="$sourcepkg>=${version}_$revision"
  short_desc+=" - development files"
  pkg_install() {
    vmove usr/include
    vmove "usr/lib/*.a"
    vmove "usr/lib/*.so"
    vmove usr/lib/pkgconfig
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
