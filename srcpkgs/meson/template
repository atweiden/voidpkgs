maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="meson"
version=0.48.0
revision=3
short_desc="Super fast build system"
noarch="yes"
depends+=" ninja"
depends+=" python3-setuptools"
hostmakedepends+=" python3-devel"
hostmakedepends+=" python3-setuptools"
license="Apache-2.0"
homepage="http://mesonbuild.com"
changelog="https://raw.githubusercontent.com/mesonbuild/meson/master/docs/markdown/Release-notes-for-${version%.?}.0.md"
distfiles="https://github.com/mesonbuild/meson/archive/$version.tar.gz"
checksum="9de95eff4577a9b2b258bdef7a544da3f7fedab94ac2eabc6bacfcd11ea4e07e"
build_style="python3-module"
pycompile_module="mesonbuild"

do_check() {
  # meson depends on a trillion pkgs to run tests, see: arch checkdepends
  :
}

post_install() {
  vmkdir usr/share/vim/vimfiles
  cp -rt "$DESTDIR/usr/share/vim/vimfiles" data/syntax-highlighting/vim/*/
  vinstall data/syntax-highlighting/emacs/meson.el 644 usr/share/emacs/site-lisp
  vinstall data/shell-completions/zsh/_meson 644 usr/share/zsh/site-functions
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
