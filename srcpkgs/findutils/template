maintainer="nox"
pkgname="findutils"
version=4.7.0
revision=1
short_desc="GNU Find Utilities"
homepage="http://www.gnu.org/software/findutils"
license="GPL-3.0-or-later"
distfiles="$GNU_SITE/findutils/$pkgname-$version.tar.xz"
checksum="c5fefbdf9858f7e4feb86f036e1247a54c79fc2d8e4b7064d5aaa1f47dfa789a"
build_style="gnu-configure"
configure_args="--program-prefix=g"
bootstrap="yes"
alternatives+=" find:find.1:/usr/share/man/man1/gfind.1"
alternatives+=" find:find:/usr/bin/gfind"
alternatives+=" xargs:xargs.1:/usr/share/man/man1/gxargs.1"
alternatives+=" xargs:xargs:/usr/bin/gxargs"

post_extract() {
  sed \
    -i \
    -e '/SUBDIRS/s/locate//' \
    Makefile.in
}

pre_check() {
  # LFS reccomends disabling this due to to the possibility of looping forever on some machines
  # see: http://www.linuxfromscratch.org/lfs/view/development/chapter06/findutils.html
  sed \
    -i \
    -e 's/test-lock..EXEEXT.//' \
    tests/Makefile.in
}

post_configure() {
  make -C locate dblocation.texi
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
