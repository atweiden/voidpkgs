maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="ccache"
version=3.5.1a
revision=2
short_desc="A Fast C/C++ Compiler Cache"
makedepends="zlib-devel"
homepage="https://ccache.samba.org"
license="GPL-3.0-or-later"
changelog="https://ccache.samba.org/news.html"
distfiles="https://samba.org/ftp/ccache/$pkgname-$version.tar.xz"
checksum="0baea2c5bc4169ed3dad1f895e6d279323c5b8d3c9f0209998fe6da4601d0701"
build_style="gnu-configure"
wrksrc="$pkgname-${version%a}"
bootstrap="yes"

post_install() {
  vmkdir usr/lib/ccache/bin
  for f in c++ \
           cc \
           g++ \
           gcc; do
    ln -sfr "$DESTDIR/usr/bin/ccache" "$DESTDIR/usr/lib/ccache/bin/$f"
    for x in aarch64-linux-gnu \
             aarch64-linux-musl \
             arm-linux-gnueabi \
             arm-linux-gnueabihf \
             arm-linux-musleabihf \
             armv7l-linux-gnueabihf \
             armv7l-linux-musleabihf \
             i686-linux-musl \
             i686-pc-linux-gnu \
             mips-linux-musl \
             mips-linux-muslhf \
             mipsel-linux-musl \
             mipsel-linux-muslhf \
             powerpc64-linux-musl \
             powerpc64le-linux-gnu \
             powerpc64le-linux-musl; do
      ln -sfr "$DESTDIR/usr/bin/ccache" "$DESTDIR/usr/lib/ccache/bin/$x-$f"
    done
  done
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
