maintainer="nox"
pkgname="squashfs-tools"
version=4.5.1
revision=1
short_desc="Tool to create and append to squashfs filesystems"
makedepends+=" liblz4-devel"
makedepends+=" liblzma-devel"
makedepends+=" libzstd-devel"
makedepends+=" lzo-devel"
makedepends+=" zlib-devel"
homepage="https://github.com/plougher/squashfs-tools"
license="GPL-2.0-or-later"
changelog="https://github.com/plougher/squashfs-tools/raw/master/CHANGES"
distfiles="https://github.com/plougher/squashfs-tools/archive/$version.tar.gz>$pkgname-$version.tar.gz"
checksum="277b6e7f75a4a57f72191295ae62766a10d627a4f5e5f19eadfbc861378deea7"
build_wrksrc="squashfs-tools"
build_style="gnu-makefile"
make_use_env="yes"
make_build_args+=" LZ4_SUPPORT=1"
make_build_args+=" LZMA_XZ_SUPPORT=1"
make_build_args+=" LZO_SUPPORT=1"
make_build_args+=" XZ_SUPPORT=1"
make_build_args+=" ZSTD_SUPPORT=1"

do_install() {
  vbin mksquashfs
  vbin unsquashfs
  ln -sf mksquashfs "$DESTDIR/usr/bin/sqfstar"
  ln -sf unsquashfs "$DESTDIR/usr/bin/sqfscat"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
