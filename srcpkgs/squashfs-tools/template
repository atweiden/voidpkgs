maintainer="nox"
pkgname="squashfs-tools"
version=4.5
revision=1
short_desc="Tool to create and append to squashfs filesystems"
makedepends+=" liblz4-devel"
makedepends+=" liblzma-devel"
makedepends+=" libzstd-devel"
makedepends+=" lzo-devel"
makedepends+=" zlib-devel"
homepage="https://github.com/plougher/squashfs-tools"
license="GPL-2.0-or-later"
distfiles="https://github.com/plougher/squashfs-tools/archive/$version.tar.gz>$pkgname-$version.tar.gz"
checksum="b9e16188e6dc1857fe312633920f7d71cc36b0162eb50f3ecb1f0040f02edddd"
build_wrksrc="squashfs-tools"
build_style="gnu-makefile"
make_use_env="yes"
make_build_args+=" LZ4_SUPPORT=1"
make_build_args+=" LZMA_XZ_SUPPORT=1"
make_build_args+=" LZO_SUPPORT=1"
make_build_args+=" XZ_SUPPORT=1"
make_build_args+=" ZSTD_SUPPORT=1"

do_install() {
  vbin mksquashfs
  vbin unsquashfs
  ln -sf mkshquashfs "$DESTDIR/usr/bin/sqfstar"
  ln -sf unshquashfs "$DESTDIR/usr/bin/sqfscat"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
