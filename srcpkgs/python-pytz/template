maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="python-pytz"
version=2019.2
revision=1
short_desc="Python2 timezone library"
archs="noarch"
depends+=" python"
depends+=" tzdata"
hostmakedepends+=" python-setuptools"
hostmakedepends+=" python3-setuptools"
homepage="https://pythonhosted.org/pytz/"
license="MIT"
distfiles="$PYPI_SITE/p/pytz/${pkgname#*-}-$version.tar.gz"
checksum="26c0b32e437e54a18161324a2fca3c4b9846b74a8dccddd843113109e1116b32"
wrksrc="${pkgname#*-}-$version"
build_style="python-module"
pycompile_module="pytz"

post_install() {
  vlicense LICENSE.txt LICENSE
  # use system tz database
  for py_sitelib in "$py2_sitelib" "$py3_sitelib"; do
    rm -rf "$DESTDIR/$py_sitelib/pytz/zoneinfo"
    ln -sf /usr/share/zoneinfo "$DESTDIR/$py_sitelib/pytz/zoneinfo"
  done
}

python3-pytz_package() {
  unset depends
  archs="noarch"
  depends+=" python3"
  depends+=" tzdata"
  pycompile_module="pytz"
  short_desc="${short_desc/Python2/Python3}"
  pkg_install() {
    vmove "usr/lib/python3*"
    vlicense LICENSE.txt LICENSE
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
