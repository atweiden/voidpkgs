maintainer="nox"
pkgname="python-pytz"
version=2020.1
revision=2
short_desc="Python2 timezone library"
depends+=" python"
depends+=" tzdata"
hostmakedepends+=" python-setuptools"
hostmakedepends+=" python3-setuptools"
homepage="https://pythonhosted.org/pytz/"
license="MIT"
distfiles="$PYPI_SITE/p/pytz/${pkgname#*-}-$version.tar.gz"
checksum="c35965d010ce31b23eeb663ed3cc8c906275d6be1a34393a1d73a41febf4a048"
wrksrc="${pkgname#*-}-$version"
build_style="python-module"

post_install() {
  vlicense LICENSE.txt LICENSE
  # use system tz database
  for py_sitelib in "$py2_sitelib" \
                    "$py3_sitelib"; do
    rm -rf "$DESTDIR/$py_sitelib/pytz/zoneinfo"
    ln -sf /usr/share/zoneinfo "$DESTDIR/$py_sitelib/pytz/zoneinfo"
  done
}

python3-pytz_package() {
  unset depends
  depends+=" python3"
  depends+=" tzdata"
  short_desc="${short_desc/Python2/Python3}"
  pkg_install() {
    vmove "usr/lib/python3*"
    vlicense LICENSE.txt LICENSE
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
