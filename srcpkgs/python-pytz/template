maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="python-pytz"
version=2018.6
revision=1
short_desc="Python2 timezone library"
noarch="yes"
depends+=" python"
depends+=" tzdata"
hostmakedepends+=" python-setuptools"
hostmakedepends+=" python3-setuptools"
homepage="https://pythonhosted.org/pytz/"
license="MIT"
distfiles="$PYPI_SITE/p/pytz/${pkgname#*-}-$version.tar.gz"
checksum="642253af8eae734d1509fc6ac9c1aee5e5b69d76392660889979b9870610a46b"
wrksrc="${pkgname#*-}-$version"
build_style="python-module"
pycompile_module="pytz"

post_install() {
  vlicense LICENSE.txt LICENSE
  # use system tz database
  for py_sitelib in "$py2_sitelib" "$py3_sitelib"; do
    rm -rf "$DESTDIR/$py_sitelib/pytz/zoneinfo"
    ln -sf /usr/share/zoneinfo "$DESTDIR/$py_sitelib/pytz/zoneinfo"
  done
}

python3-pytz_package() {
  unset depends
  noarch="yes"
  depends+=" python3"
  depends+=" tzdata"
  pycompile_module="pytz"
  short_desc="${short_desc/Python2/Python3}"
  pkg_install() {
    vmove "usr/lib/python3*"
    vlicense LICENSE.txt LICENSE
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
