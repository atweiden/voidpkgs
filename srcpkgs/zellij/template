maintainer="nox"
pkgname="zellij"
version=0.27.0
revision=1
short_desc="Terminal workspace with batteries included"
# dependency crate wasmer-vm only supports x86_64, arm64, x86
# https://docs.wasmer.io/ecosystem/wasmer/wasmer-features#compiler-support-by-chipset
archs+=" aarch64*"
archs+=" i686*"
archs+=" x86_64*"
checkdepends+=" openssl-devel"
checkdepends+=" pkg-config"
homepage="https://zellij.dev"
license="MIT"
changelog="https://github.com/zellij-org/zellij/raw/main/CHANGELOG.md"
distfiles="https://github.com/zellij-org/zellij/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="6159482c25d3cb55b04d23230812f4450e88ff0975161594297a7deef8979a38"
build_style="cargo"
# cross requires build_helper=qemu, see: upstream
nocross="yes"

post_build() {
  ZELLIJ="target/$RUST_TARGET/release/zellij"
  "$ZELLIJ" setup --generate-completion bash > zellij.bash
  "$ZELLIJ" setup --generate-completion zsh > zellij.zsh
  "$ZELLIJ" setup --generate-completion fish > zellij.fish
}

post_install() {
  vcompletion zellij.bash bash
  vcompletion zellij.zsh zsh
  vcompletion zellij.fish fish

  vlicense LICENSE.md
  vdoc README.md
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
