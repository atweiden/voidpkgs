maintainer="nox"
pkgname="python3-wheel"
version=0.42.0
revision=1
short_desc="Built-package format for Python (Python3)"
depends="python3-setuptools"
checkdepends+=" $depends"
checkdepends+=" python3-devel"
checkdepends+=" python3-pytest"
hostmakedepends="python3-setuptools"
homepage="https://github.com/pypa/wheel"
license="MIT"
distfiles="$PYPI_SITE/w/wheel/wheel-$version.tar.gz"
checksum="c45be39f7882c9d34243236f2d63cbd58039e360f85d0913425fbd7ceea617a8"
build_style="python3-module"
conflicts="python-wheel>=0"

do_check() {
  local _pypath

  # must export PYTHONPATH so subprocesses see the variable
  _pypath="$PYTHONPATH"
  export PYTHONPATH="$PWD/src:$PYTHONPATH"
  python3 -m pytest --ignore="tests/test_macosx_libfile.py"

  if [[ -n "$_pypath" ]]; then
    export PYTHONPATH="$_pypath"
  else
    unset PYTHONPATH
  fi
}

post_install() {
  vlicense LICENSE.txt LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
