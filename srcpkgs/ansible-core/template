maintainer="nox"
pkgname="ansible-core"
version=2.12.4
revision=1
short_desc="Simple deployment, configuration management and execution framework"
depends+=" python3-Jinja2"
depends+=" python3-cryptography"
depends+=" python3-packaging"
depends+=" python3-paramiko"
depends+=" python3-resolvelib"
depends+=" python3-setuptools"
depends+=" python3-yaml"
hostmakedepends="python3-setuptools"
homepage="https://www.ansible.com/"
license="GPL-3.0-or-later"
distfiles="$PYPI_SITE/a/ansible-core/ansible-core-$version.tar.gz"
checksum="827af75985a6f04b980bd371027bf038cb187640628557298acb9983a8f2c2da"
build_style="python3-module"
# tests are currently broken for ansible on python 3.10
# see https://github.com/ansible/ansible/issues/74658
# and https://github.com/ansible/ansible/issues/74660
make_check="no"
conflicts="ansible<2.10.1_1"
replaces="ansible-base<2.11.0_1"

post_install() {
  vsconf examples/ansible.cfg
  vsconf examples/hosts
  for m in docs/man/man1/*.1; do
    vman "$m"
  done
}

ansible-base_package() {
  build_style="meta"
  depends="$sourcepkg>=${version}_$revision"
  short_desc+=" (transitional dummy package)"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
