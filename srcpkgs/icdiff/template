maintainer="nox"
pkgname="icdiff"
version=1.9.5
revision=2
short_desc="Improved colored diff (Python2)"
archs="noarch"
depends+=" python"
depends+=" python-setuptools"
hostmakedepends+=" python-setuptools"
hostmakedepends+=" python3-setuptools"
homepage="http://www.jefftk.com/icdiff"
license="Python-2.0"
changelog="https://github.com/jeffkaufman/icdiff/raw/master/ChangeLog"
distfiles="https://github.com/jeffkaufman/icdiff/archive/release-$version.tar.gz>$pkgname-$version.tar.gz"
checksum="f2e3df30e93df92224538ef3c62a73891af92de4caf94e8117582835e1040fc7"
wrksrc="$pkgname-release-$version"
build_style="python-module"
pycompile_module="icdiff.py"
alternatives+=" icdiff:icdiff:/usr/bin/icdiff2"
alternatives+=" icdiff:git-icdiff:/usr/bin/git-icdiff2"

post_install() {
  vlicense LICENSE
}

python3-icdiff_package() {
  unset alternatives
  unset depends
  archs="noarch"
  depends+=" python3"
  depends+=" python3-setuptools"
  pycompile_module="icdiff.py"
  alternatives+=" icdiff:icdiff:/usr/bin/icdiff3"
  alternatives+=" icdiff:git-icdiff:/usr/bin/git-icdiff3"
  short_desc="${short_desc/2/3}"
  pkg_install() {
    vmove usr/bin/icdiff3
    vmove usr/bin/git-icdiff3
    vmove "usr/lib/python3*"
    vlicense LICENSE
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
