maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="bc-gh"
version=2.3.0
revision=1
short_desc="Implementation of POSIX bc with GNU extensions"
homepage="https://github.com/gavinhoward/bc"
license="BSD-2-Clause"
distfiles="https://github.com/gavinhoward/bc/releases/download/$version/${pkgname%-*}-$version.tar.xz"
checksum="5a4d14721688ce0a2679fb02680fe8dc41574417f60647be3a125d53d5672f5d"
wrksrc="${pkgname%-*}-$version"
alternatives+=" bc:bc:/usr/bin/bc-gh"
alternatives+=" dc:dc:/usr/bin/dc-gh"

do_configure() {
  CC="$CC" \
  CFLAGS="$CFLAGS" \
  DESTDIR="$DESTDIR" \
  EXECSUFFIX="-gh" \
  HOSTCC="$CC_FOR_BUILD" \
  HOSTCFLAGS="$CFLAGS_FOR_BUILD" \
  PREFIX="/usr" \
    ./configure.sh -GM
}

do_build() {
  make "$makejobs"
}

do_check() {
  make "$makejobs" test
}

do_install() {
  # note that make install is used because of a symlink
  make install
  vman manuals/bc.1
  vman manuals/dc.1
  vlicense LICENSE.md
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
