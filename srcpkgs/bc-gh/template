maintainer="nox"
pkgname="bc-gh"
version=3.1.5
revision=1
short_desc="Implementation of POSIX bc with GNU extensions"
homepage="https://github.com/gavinhoward/bc"
license="BSD-2-Clause"
distfiles="https://github.com/gavinhoward/bc/releases/download/$version/${pkgname%-*}-$version.tar.xz"
checksum="0493c1eb76e94ace7a00532824121ab901ac1bd3580a340ea5de92a7d9c1a19e"
wrksrc="${pkgname%-*}-$version"
alternatives+=" bc:bc.1:/usr/share/man/man1/bc-gh.1"
alternatives+=" bc:bc:/usr/bin/bc-gh"
alternatives+=" dc:dc.1:/usr/share/man/man1/dc-gh.1"
alternatives+=" dc:dc:/usr/bin/dc-gh"

do_configure() {
  CC="$CC" \
  CFLAGS="$CFLAGS" \
  DESTDIR="$DESTDIR" \
  EXECSUFFIX="-gh" \
  HOSTCC="$CC_FOR_BUILD" \
  HOSTCFLAGS="$CFLAGS_FOR_BUILD" \
  PREFIX="/usr" \
    ./configure.sh -GM
}

do_build() {
  make "$makejobs"
}

do_check() {
  make "$makejobs" test
}

do_install() {
  # note that make install is used because of a symlink
  make install
  vman manuals/bc.1 bc-gh.1
  vman manuals/dc.1 dc-gh.1
  vlicense LICENSE.md
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
