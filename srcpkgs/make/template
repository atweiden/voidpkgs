maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="make"
version=4.2.1
revision=5
short_desc="The GNU make system"
makedepends="$(vopt_if guile 'gc-devel guile-devel')"
homepage="http://www.gnu.org/software/make"
license="GPL-3.0-or-later"
distfiles="$GNU_SITE/make/$pkgname-$version.tar.bz2"
checksum="d6e262bf3601b42d2b1e4ef8310029e1dcf20083c5446b4b7aa67081fdffc589"
patch_args="-Np1"
build_style="gnu-configure"
configure_args="$(vopt_with guile)"
build_options="guile"
build_options_default="guile"
bootstrap="yes"

if [[ -n "$CHROOT_READY" ]]; then
  hostmakedepends+=" automake"
  hostmakedepends+=" gettext-devel"
  hostmakedepends+=" pkg-config"
fi

# this should be temporary until upstream releases new version with fixes
pre_configure() {
  autoreconf -fi
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
