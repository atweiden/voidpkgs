maintainer="nox"
pkgname="flake8"
version=6.0.0
revision=1
short_desc="Modular source code checker: pycodestyle, pyflakes, mccabe"
depends+=" python3-mccabe"
depends+=" python3-pycodestyle"
depends+=" python3-pyflakes"
checkdepends+=" $depends"
checkdepends+=" python3-mock"
checkdepends+=" python3-pytest"
hostmakedepends="python3-setuptools"
homepage="https://flake8.pycqa.org/"
license="MIT"
changelog="https://github.com/PyCQA/flake8/raw/main/docs/source/release-notes/$version.rst"
distfiles="$PYPI_SITE/f/flake8/flake8-$version.tar.gz"
checksum="c61007e76655af75e6785a931f452915b371dc48f56efd765247c8fe68f2b181"
build_style="python3-module"

do_check() {
  local testdir
  testdir="tmp/$(date +%s)"
  python3 setup.py install --prefix="/usr" --root="$testdir"
  PATH="$testdir/usr/bin:$PATH" \
  PYTHONPATH="$testdir/$py3_sitelib" \
    pytest3 --ignore tests/unit/plugins/pycodestyle_test.py
}

post_install() {
  vlicense LICENSE
}

python3-flake8_package() {
  build_style=meta
  short_desc+=" (transitional dummy package)"
  depends="flake8>=${version}_$revision"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
