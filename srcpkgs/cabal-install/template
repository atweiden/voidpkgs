maintainer="nox"
pkgname="cabal-install"
version=3.0.0.0
revision=1
short_desc="Command-line interface for Cabal and Hackage"
depends="ghc"
makedepends+=" gmp-devel"
makedepends+=" libffi-devel"
makedepends+=" zlib-devel"
hostmakedepends+=" curl"
hostmakedepends+=" ghc"
hostmakedepends+=" tar"
hostmakedepends+=" which"
homepage="https://hackage.haskell.org/package/cabal-install"
license="BSD-3-Clause"
distfiles="https://hackage.haskell.org/packages/archive/cabal-install/$version/$pkgname-$version.tar.gz"
checksum="a432a7853afe96c0fd80f434bd80274601331d8c46b628cd19a0d8e96212aaf1"
nopie_files="/usr/bin/cabal"

do_build() {
  vsed \
    -i \
    -e 's/< *4/<5/' \
    "$pkgname.cabal"
  PREFIX="$PWD/build" sh bootstrap.sh --user
}

do_install() {
  vbin build/bin/cabal
  vman build/share/man/man1/cabal.1
  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
