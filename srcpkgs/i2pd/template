maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="i2pd"
version=2.21.1
revision=1
short_desc="I2P Daemon - a full-featured C++ implementation of I2P client"
makedepends+=" boost-devel"
makedepends+=" libatomic-devel"
makedepends+=" libressl-devel"
makedepends+=" miniupnpc-devel"
makedepends+=" zlib-devel"
homepage="http://i2pd.website/"
license="BSD"
distfiles="https://github.com/PurpleI2P/i2pd/archive/$version.tar.gz>$pkgname-$version.tar.gz"
checksum="617e014fe5b16274f1fa38a5b409b2305c8bc0ec23a27fb20508f6fea7d44fcc"
build_style="gnu-makefile"
make_build_args+=" USE_UPNP=yes"
case "$XBPS_TARGET_MACHINE" in
  aarch64*|armv*|mips*)
    make_build_args+=" USE_AESNI=no"
    make_build_args+=" USE_AVX=no"
    ;;
esac
system_accounts="_i2pd"
disable_parallel_build=true

do_install() {
  vbin i2pd
  vlicense LICENSE
  vman debian/i2pd.1
  vsconf contrib/i2pd.conf
  vsconf contrib/tunnels.conf
  vsconf contrib/subscriptions.txt
}

post_install() {
  vsv i2pd
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
