maintainer="nox"
pkgname="usbutils"
version=014
revision=1
short_desc="Linux USB utilities"
depends="hwids"
makedepends+=" eudev-libudev-devel"
makedepends+=" libusb-devel"
hostmakedepends+=" automake"
hostmakedepends+=" libtool"
hostmakedepends+=" pkg-config"
homepage="https://linux-usb.sourceforge.net/"
license="GPL-2.0-only"
changelog="https://github.com/gregkh/usbutils/raw/master/NEWS"
distfiles="$KERNEL_SITE/utils/usb/usbutils/$pkgname-$version.tar.xz"
checksum="3a079cfad60560227b67192482d7813bf96326fcbb66c04254839715f276fc69"
build_style="gnu-configure"
configure_args+=" --datadir=/usr/share/hwdata"
configure_args+=" --disable-zlib"

post_install() {
  # remove lsusb.py - avoid useless python scripts
  rm -f "$DESTDIR/usr/bin/lsusb.py"
  # remove usb ids - provided by hwids
  rm -rf "$DESTDIR/usr/share/hwdata"
  # remove update-usbids.sh - handled by hwids
  rm -f "$DESTDIR/usr/sbin/update-usbids.sh"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
