maintainer="nox"
pkgname="python3-elementpath"
version=1.4.1
revision=1
short_desc="XPath 1.0/2.0 parsers and selectors for ElementTree and lxml"
archs="noarch"
depends="python3"
checkdepends+=" python3-lxml"
checkdepends+=" python3-xmlschema"
hostmakedepends="python3-setuptools"
homepage="https://github.com/sissaschool/elementpath"
license="MIT"
distfiles="$PYPI_SITE/e/elementpath/elementpath-$version.tar.gz"
checksum="b29f626d690cb6f3716a65867a456c54dd679ddce7249bb2af4f37d33b83035d"
wrksrc="elementpath-$version"
build_style="python3-module"

post_patch() {
  # locale handling in musl is NOT that ideal
  # those tests is broken on musl
  if [[ "$XBPS_TARGET_LIBC" == "musl" ]]; then
    vsed \
      -i \
      -e "/compare.*Strassen.* 1/d" \
      -e "/with self\.assertRaises(locale\.Error)/,+3d" \
      tests/test_xpath2_parser.py
  fi
}

post_install() {
  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
