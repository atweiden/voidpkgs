maintainer="nox"
pkgname="sysstat"
version=12.7.2
revision=1
short_desc="Collection of performance monitoring tools"
depends="lm_sensors"
hostmakedepends+=" gettext"
hostmakedepends+=" pkg-config"
homepage="http://pagesperso-orange.fr/sebastien.godard/"
license="GPL-2.0-or-later"
distfiles="http://pagesperso-orange.fr/sebastien.godard/sysstat-$version.tar.xz"
checksum="ec4090c9c140d8301d5f8cd84e21456737d094d054141a30f557ccb05bbd3b9f"
conf_files+=" /etc/default/sysstat"
conf_files+=" /etc/default/sysstat.ioconf"
build_style="gnu-configure"
configure_args+=" --disable-file-attr"
configure_args+=" --enable-copy-only"
configure_args+=" --enable-install-cron"
configure_args+=" --with-systemdsystemunitdir="

post_extract() {
  vsed \
    -i \
    -e 's/lib64/lib/' \
    configure
  vsed \
    -i \
    -e '/LFLAGS =/d; s/LFLAGS/LDFLAGS/g' \
    Makefile.in
}

pre_configure() {
  export conf_dir="/etc/default"
  export cron_owner="$(whoami)"
  vmkdir etc/cron.daily
  vmkdir etc/cron.hourly
}

post_install() {
  vbin contrib/isag/isag
  vman contrib/isag/isag.1
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
