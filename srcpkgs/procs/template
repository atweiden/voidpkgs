maintainer="nox"
pkgname="procs"
version=0.14.3
revision=1
short_desc="Modern replacement for ps written in Rust"
homepage="https://github.com/dalance/procs"
license="MIT"
changelog="https://github.com/dalance/procs/raw/master/CHANGELOG.md"
distfiles="https://github.com/dalance/procs/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="a3012bba984faddcf8da2a72d21eb9a7e9be8d5d86a387d321987743b0080a8c"
build_style="cargo"
# shell completion generation requires qemu (see: upstream)
nocross="yes"

post_install() {
  # build shell completions without cross-platform support (see: upstream)
  PROCS="$DESTDIR/usr/bin/procs"
  "$PROCS" --gen-completion-out bash > procs.bash
  "$PROCS" --gen-completion-out fish > procs.fish
  "$PROCS" --gen-completion-out zsh > procs.zsh

  vcompletion procs.bash bash
  vcompletion procs.fish fish
  vcompletion procs.zsh zsh

  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
