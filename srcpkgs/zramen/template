maintainer="nox"
pkgname="zramen"
version=0.5.0
revision=1
short_desc="Manage zram swap space"
depends+=" virtual?awk"
depends+=" bash"
depends+=" bc"
depends+=" coreutils"
depends+=" grep"
depends+=" kmod"
depends+=" procps-ng"
depends+=" util-linux"
homepage="https://github.com/atweiden/zramen"
license="Unlicense"
distfiles="https://github.com/atweiden/zramen/releases/download/$version/$pkgname-$version.tar.gz"
checksum="fbfc243f35e815621e3e7a36138ebfb2e6071217a0f11bfcedef4f7eba26d6de"
conf_files="/etc/sv/zramen/conf"

do_install() {
  vbin zramen
}

post_install() {
  vlicense UNLICENSE
  vdoc README.md
  vmkdir etc/sv
  vcopy sv/zramen etc/sv
  chmod 644 "$PKGDESTDIR/etc/sv/zramen/conf"
  chmod 755 "$PKGDESTDIR/etc/sv/zramen/finish"
  chmod 755 "$PKGDESTDIR/etc/sv/zramen/run"
  ln -s /run/runit/supervise.zramen "$PKGDESTDIR/etc/sv/zramen/supervise"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
