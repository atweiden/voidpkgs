maintainer="nox"
pkgname="python3-async-timeout"
version=3.0.1
revision=5
short_desc="Timeout context manager for asyncio programs"
depends="python3"
checkdepends="python3-pytest-asyncio"
hostmakedepends="python3-setuptools"
homepage="https://github.com/aio-libs/async-timeout"
license="Apache-2.0"
#changelog="https://github.com/aio-libs/async-timeout/raw/master/CHANGES.rst"
distfiles="https://github.com/aio-libs/async-timeout/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="d0a7a927ed6b922835e1b014dfcaa9982caccbb25131320582cc660af7c93949"
wrksrc="async-timeout-$version"
build_style="python3-module"
pycompile_module="async_timeout"

do_check() {
  # don't enable coverage
  sed \
    -i \
    -e '/addopts=/d' \
    setup.cfg

  python3 -m pytest
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
