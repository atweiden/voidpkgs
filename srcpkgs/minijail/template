maintainer="nox"
pkgname="minijail"
version=12
revision=1
short_desc="Sandboxing and containment tool used in Chrome OS and Android"
makedepends="libcap-devel"
homepage="https://android.googlesource.com/platform/external/minijail"
license="BSD-3-Clause"
distfiles="https://gitlab.com/chinstrap/minijail/-/archive/linux-v$version/$pkgname-linux-v$version.tar.gz"
checksum="2f8ef7a0f0f3b21752fb629b3ff8a5bb713eb448306ccfa34331deff4491ea52"
wrksrc="$pkgname-linux-v$version"
build_style="gnu-makefile"

if [[ "$XBPS_TARGET_ENDIAN" == "be" ]]; then
  broken="bpf.h:110:2: error: #error Unsupported endianness"
fi

do_install() {
  vbin minijail0
  vmkdir usr/lib
  vcopy libminijail.so usr/lib
  vcopy libminijailpreload.so usr/lib
  vman minijail0.1
  vman minijail0.5
  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
