_triplet="arm-none-eabi"
_pkgname="gcc"

maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="cross-$_triplet-$_pkgname"
version=8.3.0
revision=1
short_desc="GNU Compiler Collection"
depends="cross-arm-none-eabi-binutils"
makedepends+=" gmp-devel"
makedepends+=" isl15-devel"
makedepends+=" libmpc-devel"
makedepends+=" mpfr-devel"
makedepends+=" zlib-devel"
hostmakedepends+=" autoconf"
hostmakedepends+=" automake"
hostmakedepends+=" bison"
hostmakedepends+=" cross-arm-none-eabi-binutils"
hostmakedepends+=" flex"
hostmakedepends+=" perl"
homepage="https://gcc.gnu.org"
license="GFDL-1.2-or-later, GPL-3.0-or-later, LGPL-2.1-or-later"
distfiles="$GNU_SITE/$_pkgname/$_pkgname-$version/$_pkgname-$version.tar.xz"
checksum="64baadfe6cc0f4947a84cb12d7f0dfaf45bb58b7e92461639596c21e02d97d2c"
wrksrc="$_pkgname-$version"
build_style="gnu-configure"
configure_args+=" --disable-decimal-float"
configure_args+=" --disable-libffi"
configure_args+=" --disable-libgomp"
configure_args+=" --disable-libmudflap"
configure_args+=" --disable-libquadmath"
configure_args+=" --disable-libssp"
configure_args+=" --disable-libstdcxx-pch"
configure_args+=" --disable-nls"
configure_args+=" --disable-shared"
configure_args+=" --disable-threads"
configure_args+=" --disable-tls"
configure_args+=" --disable-werror"
configure_args+=" --enable-__cxa_atexit"
configure_args+=" --enable-c99"
configure_args+=" --enable-gnu-indirect-function"
configure_args+=" --enable-interwork"
configure_args+=" --enable-languages=c,c++"
configure_args+=" --enable-long-long"
configure_args+=" --enable-multilib"
configure_args+=" --enable-plugins"
configure_args+=" --host=$XBPS_CROSS_TRIPLET"
configure_args+=" --libdir=/usr/lib"
configure_args+=" --libexecdir=/usr/lib"
configure_args+=" --prefix=/usr"
configure_args+=" --target=$_triplet"
configure_args+=" --with-gmp"
configure_args+=" --with-gnu-as"
configure_args+=" --with-gnu-ld"
configure_args+=" --with-headers=/usr/$_triplet/include"
configure_args+=" --with-host-libstdcxx='-static-libgcc'"
configure_args+=" --with-isl"
configure_args+=" --with-libelf"
configure_args+=" --with-mpc"
configure_args+=" --with-mpfr"
configure_args+=" --with-multilib-list=rmprofile"
configure_args+=" --with-native-system-header-dir=/include"
configure_args+=" --with-newlib"
configure_args+=" --with-python-dir=share/$_pkgname-$_triplet"
configure_args+=" --with-sysroot=/usr/$_triplet"
configure_args+=" --with-system-zlib"
make_build_target="all-gcc"
make_install_target="install-gcc"
alternatives="arm-none-eabi:/usr/bin/arm-none-eabi-cc:/usr/bin/arm-none-eabi-gcc"
nocross="yes"
nopie="yes"

post_install() {
  rm -fr "$DESTDIR/usr/share"/{info,man/man7}
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
