maintainer="nox"
pkgname="darkhttpd"
version=1.12
revision=3
short_desc="Small and secure static webserver"
homepage="https://unix4lyfe.org/darkhttpd/"
license="ISC"
distfiles="https://unix4lyfe.org/darkhttpd/$pkgname-$version.tar.bz2"
checksum="a50417b622b32b5f421b3132cb94ebeff04f02c5fb87fba2e31147d23de50505"
system_accounts="_darkhttpd"
make_dirs+=" /srv/www/darkhttpd 0755 _darkhttpd _darkhttpd"
make_dirs+=" /var/log/darkhttpd 0755 _darkhttpd _darkhttpd"

CFLAGS+=" $CFLAGS"
CFLAGS+=" $LDFLAGS"

do_build() {
  $CC $CFLAGS $LDFLAGS $LIBS darkhttpd.c -o darkhttpd
}

do_install() {
  vbin darkhttpd
}

post_install() {
  sed -n '0,/^$/p' darkhttpd.c > LICENSE
  vlicense LICENSE
  vsv darkhttpd
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
