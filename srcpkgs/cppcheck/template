maintainer="nox"
pkgname="cppcheck"
version=2.9.3
revision=1
short_desc="Static analysis of C/C++ code"
depends="python3"
makedepends="pcre-devel"
hostmakedepends+=" docbook-xsl"
hostmakedepends+=" libxslt"
hostmakedepends+=" python3"
hostmakedepends+=" which"
homepage="http://cppcheck.sourceforge.net"
license="GPL-3.0-or-later"
changelog="https://sourceforge.net/p/cppcheck/news/"
distfiles="https://github.com/danmar/cppcheck/archive/$version.tar.gz>$pkgname-$version.tar.gz"
checksum="46319ca73e33e4b2bd91981a76a0d4f184cd3f86b62dc18e8938eabacd3ad2e3"
build_style="gnu-makefile"
python_version="3"
make_build_args+=" DB2MAN=/usr/share/xsl/docbook/manpages/docbook.xsl"
make_build_args+=" FILESDIR=/usr/share/cppcheck"
make_build_args+=" HAVE_RULES=yes"
make_build_args+=" MATCHCOMPILER=yes"
make_install_args="$make_build_args"
make_build_target+=" cppcheck"
make_build_target+=" man"

export CXXFLAGS="-DNDEBUG"
export LDFLAGS="-pthread"

post_install() {
  vman cppcheck.1
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
