maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="musl-obstack"
version=1.1
revision=3
short_desc="Implementation of obstack for musl libc"
archs="*-musl"
hostmakedepends+=" automake"
hostmakedepends+=" libtool"
homepage="https://github.com/pullmoll/musl-obstack"
license="GPL-2.0-or-later"
distfiles="https://github.com/pullmoll/musl-obstack/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="52a216613e7d55e8725e43d017bb2d49a4b1ffa1e06da472f03c7f9875df7d0d"
build_style="gnu-configure"
configure_args="--disable-shared"

CFLAGS="-fPIC"

pre_configure() {
  sed \
    -i \
    -e "/pkgconfig_DATA/i pkgconfigdir=\$(libdir)/pkgconfig" \
    Makefile.am
  ./bootstrap.sh
}

post_install() {
  vinstall "$pkgname.pc" 644 usr/lib/pkgconfig
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
