maintainer="nox"
pkgname="python3-Werkzeug"
version=2.0.3
revision=1
short_desc="Swiss Army knife of Python web development (Python3)"
depends="python3"
checkdepends+=" python3-hypothesis"
checkdepends+=" python3-pytest"
checkdepends+=" python3-requests"
hostmakedepends="python3-setuptools"
homepage="https://palletsprojects.com/p/werkzeug/"
license="BSD-3-Clause"
distfiles="$PYPI_SITE/W/Werkzeug/Werkzeug-$version.tar.gz"
checksum="b863f8ff057c522164b6067c9e28b041161b4be5ba4d0daceeaa50a163822d3c"
wrksrc="${pkgname#*-}-$version"
build_style="python3-module"

do_check() {
  # tests depend on xprocess and pytest-timeout, which aren't packaged
  # for some reason, --ignore doesn't work
  rm -f tests/conftest.py tests/test_debug.py tests/test_serving.py
  PYTHONPATH="src" python3 -m pytest tests -k 'not test_http_proxy'
}

post_install() {
  vlicense LICENSE.rst
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
