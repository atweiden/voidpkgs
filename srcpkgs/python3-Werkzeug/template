maintainer="nox"
pkgname="python3-Werkzeug"
version=2.2.2
revision=2
short_desc="Swiss Army knife of Python web development (Python3)"
depends="python3-MarkupSafe"
checkdepends+=" python3-MarkupSafe"
checkdepends+=" python3-hypothesis"
checkdepends+=" python3-pytest"
checkdepends+=" python3-requests"
hostmakedepends="python3-setuptools"
homepage="https://palletsprojects.com/p/werkzeug/"
license="BSD-3-Clause"
changelog="https://github.com/pallets/werkzeug/raw/main/CHANGES.rst"
distfiles="$PYPI_SITE/W/Werkzeug/Werkzeug-$version.tar.gz"
checksum="7ea2d48322cc7c0f8b3a215ed73eabd7b5d75d0b50e31ab006286ccff9e00b8f"
wrksrc="${pkgname#*-}-$version"
build_style="python3-module"

do_check() {
  # tests depend on xprocess and pytest-timeout, which aren't packaged
  # for some reason, --ignore doesn't work
  rm -f tests/conftest.py tests/test_debug.py tests/test_serving.py
  PYTHONPATH="src" python3 -m pytest tests -k 'not test_http_proxy'
}

post_install() {
  vlicense LICENSE.rst
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
