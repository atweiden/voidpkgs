maintainer="nox"
pkgname="mcelog"
version=193
revision=1
short_desc="Decode kernel machine check log on x86 machines"
archs+=" i686*"
archs+=" x86_64*"
hostmakedepends="python3"
homepage="http://www.mcelog.org/"
license="GPL-2.0-only"
distfiles="https://github.com/andikleen/mcelog/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="247a972259b2f9069e6f5ea75eb815ed5746395a81d6619dd033eba9062b13c6"
conf_files="/etc/mcelog/mcelog.conf"

do_build() {
  make \
    CC="$CC" \
    CFLAGS="$CFLAGS $LDFLAGS" \
    "$makejobs"
}

do_install() {
  vmkdir usr/share/man/man5
  vmkdir usr/share/man/man8
  make \
    PREFIX="/usr" \
    DESTDIR="$DESTDIR" \
    install
  mv "$DESTDIR/usr/sbin" "$DESTDIR/usr/bin"
  vsv mcelog
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
