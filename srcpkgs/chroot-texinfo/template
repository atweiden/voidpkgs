maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="chroot-texinfo"
version=4.13a
revision=10
short_desc="The GNU Documentation System - for xbps-src use"
makedepends="ncurses-devel"
hostmakedepends="ncurses-devel"
homepage="http://www.gnu.org/software/texinfo/"
license="GPL-3"
distfiles="$GNU_SITE/texinfo/${pkgname#chroot-}-$version.tar.lzma"
checksum="6d28b0ceae866e3536142fc552e7a3bc9f84c8303119c25731b2478eef64c9e5"
wrksrc="texinfo-4.13"
bootstrap="yes"
provides="texinfo-${version}_$revision"
conflicts="texinfo>=0"
reverts="6.5_1"

do_configure() {
  cp -f "$XBPS_COMMONDIR/environment/configure/automake/config.sub" build-aux
  ./configure \
    $configure_args \
    --disable-nls
}

do_build() {
  if [[ -d "tools" ]]; then
    make "$makejobs" -C tools/gnulib/lib
    make "$makejobs" -C tools
  fi
  make "$makejobs"
}

do_install() {
  make DESTDIR="$DESTDIR" install
}

post_install() {
  rm -f "$DESTDIR/usr/bin/info"
  rm -f "$DESTDIR/usr/bin/infokey"
  rm -rf "$DESTDIR/usr/share"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
