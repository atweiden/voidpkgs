maintainer="nox"
pkgname="fuse-sshfs"
version=3.7.0
revision=1
short_desc="FUSE client based on the SSH File Transfer Protocol"
depends="openssh"
makedepends+=" fuse3-devel"
makedepends+=" libglib-devel"
makedepends+=" python3-docutils"
checkdepends="python3-pytest"
hostmakedepends="pkg-config"
homepage="https://github.com/libfuse/sshfs"
license="GPL-2.0-or-later"
distfiles="https://github.com/libfuse/sshfs/releases/download/sshfs-$version/sshfs-$version.tar.xz"
checksum="6e7e86831f3066b356e7f16e22f1b8a8f177fda05146f6a5eb821c2fd0541c34"
wrksrc="sshfs-$version"
build_style="meson"
configure_args="--sbindir=bin"

case "$XBPS_TARGET_MACHINE" in
  i686|armv6l|armv7l)
    CFLAGS+=" -D_FILE_OFFSET_BITS=64"
    ;;
esac

do_check() {
  python3 -m pytest
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
