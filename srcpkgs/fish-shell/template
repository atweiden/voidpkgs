maintainer="nox"
pkgname="fish-shell"
version=3.1.2
revision=2
short_desc="User friendly shell intended mostly for interactive use"
depends="groff"
makedepends+=" gettext-devel"
makedepends+=" ncurses-devel"
makedepends+=" pcre2-devel"
hostmakedepends="gettext"
homepage="https://fishshell.com/"
license="GPL-2.0-only"
distfiles="https://github.com/fish-shell/fish-shell/releases/download/$version/${pkgname%-*}-$version.tar.gz"
checksum="d5b927203b5ca95da16f514969e2a91a537b2f75bec9b21a584c4cd1c7aa74ed"
wrksrc="fish-$version"
build_style="cmake"
register_shell+=" /bin/fish"
register_shell+=" /usr/bin/fish"

if [[ -n "$XBPS_TARGET_NO_ATOMIC8" ]]; then
  makedepends+=" libatomic-devel"
fi

post_install() {
  # starting with fish-3.0.0 this is a skeleton file with only comments
  rm -f "$DESTDIR/usr/etc/fish/config.fish"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
