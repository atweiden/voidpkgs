maintainer="nox"
pkgname="pixman"
version=0.38.4
revision=1
short_desc="Library of low-level pixel manipulation routines"
hostmakedepends+=" perl"
hostmakedepends+=" pkg-config"
homepage="https://wiki.freedesktop.org/xorg/"
license="MIT"
distfiles="$XORG_SITE/lib/$pkgname-$version.tar.bz2"
checksum="84abb7fa2541af24d9c3b34bf75d6ac60cc94ac4410061bbb295b66a29221550"
build_style="gnu-configure"
configure_args="--disable-gtk"

pre_configure() {
  case "$XBPS_TARGET_MACHINE" in
    arm*)
      configure_args+=" --disable-arm-iwmmxt"
      configure_args+=" --disable-arm-iwmmxt2"
      ;;
  esac
}

post_install() {
  vlicense COPYING
}

pixman-devel_package() {
  depends="pixman>=${version}_$revision"
  short_desc+=" - development files"
  pkg_install() {
    vmove usr/include
    vmove usr/lib/pkgconfig
    vmove "usr/lib/*.a"
    vmove "usr/lib/*.so"
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
