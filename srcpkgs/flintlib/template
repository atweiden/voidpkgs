maintainer="nox"
pkgname="flintlib"
version=2.8.5
revision=1
short_desc="Fast Library for Number Theory"
makedepends+=" mpfr-devel"
makedepends+=" $(vopt_if ntl ntl-devel)"
makedepends+=" $(vopt_if openblas openblas-devel)"
homepage="https://flintlib.org"
license="LGPL-2.1-or-later"
changelog="https://github.com/wbhart/flint2/raw/trunk/NEWS"
distfiles="https://flintlib.org/flint-$version.tar.gz"
checksum="5911fedff911100f15781f35e3a4fa934fe60e4aea02a8c10cc8918101c1eed8"
wrksrc="flint-$version"
build_style="configure"
configure_args+=" --prefix=/usr"
configure_args+=" $(vopt_with ntl)"
configure_args+=" $(vopt_if openblas --with-blas=$XBPS_CROSS_BASE/usr/include/openblas)"
build_options+=" ntl"
build_options+=" openblas"
desc_option_ntl="enable NTL support"
build_options_default="openblas"
if [[ -z "$CROSS_BUILD" ]]; then
  build_options_default+=" ntl"
fi

# needed for cpu_set_t
CFLAGS="-D_GNU_SOURCE"

flintlib-devel_package() {
  unset depends
  depends+=" $sourcepkg>=${version}_$revision"
  depends+=" mpfr-devel"
  short_desc+=" - development files"
  pkg_install() {
    vmove usr/include
    vmove "usr/lib/*.a"
    vmove "usr/lib/*.so"
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
