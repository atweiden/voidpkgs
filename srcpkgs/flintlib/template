maintainer="nox"
pkgname="flintlib"
version=2.8.4
revision=1
short_desc="Fast Library for Number Theory"
makedepends+=" mpfr-devel"
makedepends+=" $(vopt_if ntl ntl-devel)"
homepage="https://flintlib.org"
license="LGPL-2.1-or-later"
changelog="https://github.com/wbhart/flint2/raw/trunk/NEWS"
distfiles="https://flintlib.org/flint-$version.tar.gz"
checksum="61df92ea8c8e9dc692d46c71d7f50aaa09a33d4ba08d02a1784730a445e5e4be"
wrksrc="flint-$version"
build_style="configure"
configure_args+=" --prefix=/usr"
configure_args+=" --with-gmp=/usr"
configure_args+=" --with-mpfr=/usr"
configure_args+=" $(vopt_if ntl --with-ntl=/usr)"
build_options="ntl"
desc_option_ntl="enable NTL support"

if [[ -z "$CROSS_BUILD" ]]; then
  build_options_default+=" ntl"
fi

# needed for cpu_set_t
CFLAGS="-D_GNU_SOURCE"

flintlib-devel_package() {
  unset depends
  depends+=" $sourcepkg>=${version}_$revision"
  depends+=" mpfr-devel"
  short_desc+=" - development files"
  pkg_install() {
    vmove usr/include
    vmove "usr/lib/*.a"
    vmove "usr/lib/*.so"
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
