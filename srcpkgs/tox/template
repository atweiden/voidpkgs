maintainer="nox"
pkgname="tox"
version=3.28.0
revision=2
short_desc="Generic virtualenv management and test command line tool"
depends+=" python3-filelock"
depends+=" python3-packaging"
depends+=" python3-pluggy"
depends+=" python3-pytest"
depends+=" python3-virtualenv"
checkdepends+=" $depends"
checkdepends+=" python3-flaky"
checkdepends+=" python3-freezegun"
checkdepends+=" python3-pathlib2"
checkdepends+=" python3-pip"
checkdepends+=" python3-pytest-mock"
hostmakedepends="python3-setuptools_scm"
homepage="https://tox.wiki/en/legacy/"
license="MIT"
changelog="https://tox.wiki/en/legacy/changelog.html"
distfiles="$PYPI_SITE/t/tox/tox-$version.tar.gz"
checksum="d0d28f3fe6d6d7195c27f8b054c3e99d5451952b54abdae673b71609a581f640"
build_style="python3-module"

do_check() {
  # skipped tests fail to find module or rely on missing entrypoint script
  PYTHONPATH="src" python3 -m pytest \
    -k "not test_parallel \
        and not test_provision_race \
        and not test_tox_console_script \
        and not test_tox_quickstart_script \
        and not test_provision_cli_args_ignore \
        and not test_provision_interrupt_child \
        and not test_provision_non_canonical_dep \
        and not test_package_poetry"
 }

post_install() {
  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
