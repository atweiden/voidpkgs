maintainer="nox"
pkgname="uboot-mkimage"
version=2014.01
revision=5
short_desc="The U-Boot mkimage utility"
homepage="http://www.denx.de/wiki/U-Boot/WebHome"
license="GPL-2"
distfiles="ftp://ftp.denx.de/pub/u-boot/u-boot-$version.tar.bz2"
checksum="cdaf8c81583abfa2e73da46cfcf87b0cbd9741d9aa766f3b905376e3652d543d"
wrksrc="u-boot-$version"

do_configure() {
  sed \
    -i \
    -e 's,ulong,unsigned long,g' \
    include/*.[ch] \
    common/*.[ch] \
    tools/*.[ch]
}

do_build() {
  if [[ -n "$XBPS_CROSS_TRIPLET" ]]; then
    make HOSTSTRIP=":" HOSTCC="$XBPS_CROSS_TRIPLET-gcc $CFLAGS $LDFLAGS" tools
  else
    make HOSTSTRIP=":" HOSTCC="$CC $CFLAGS $LDFLAGS" tools
  fi
}

do_install() {
  vbin tools/mkimage
}

post_install() {
  vman doc/mkimage.1
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
