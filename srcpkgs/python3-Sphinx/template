maintainer="nox"
pkgname="python3-Sphinx"
version=2.4.2
revision=1
short_desc="Python 3 documentation generator"
archs="noarch"
depends+=" python3-Babel"
depends+=" python3-Jinja2"
depends+=" python3-Pygments"
depends+=" python3-alabaster"
depends+=" python3-docutils"
depends+=" python3-imagesize"
depends+=" python3-packaging"
depends+=" python3-requests"
depends+=" python3-snowballstemmer"
depends+=" python3-sphinxcontrib-applehelp"
depends+=" python3-sphinxcontrib-devhelp"
depends+=" python3-sphinxcontrib-htmlhelp"
depends+=" python3-sphinxcontrib-jsmath"
depends+=" python3-sphinxcontrib-qthelp"
depends+=" python3-sphinxcontrib-serializinghtml"
# XXX: testing requires gui deps
#checkdepends+=" $depends"
#checkdepends+=" ImageMagick"
#checkdepends+=" gettext"
#checkdepends+=" python3-html5lib"
#checkdepends+=" python3-mypy"
#checkdepends+=" python3-pytest"
hostmakedepends="python3-setuptools"
homepage="http://sphinx-doc.org"
license="BSD-3-Clause"
distfiles="$PYPI_SITE/S/Sphinx/Sphinx-$version.tar.gz"
checksum="525527074f2e0c2585f68f73c99b4dc257c34bbe308b27f5f8c7a6e20642742f"
wrksrc="Sphinx-$version"
build_style="python3-module"
alternatives+=" sphinx:sphinx-apidoc:/usr/bin/sphinx-apidoc3"
alternatives+=" sphinx:sphinx-autogen:/usr/bin/sphinx-autogen3"
alternatives+=" sphinx:sphinx-build:/usr/bin/sphinx-build3"
alternatives+=" sphinx:sphinx-quickstart:/usr/bin/sphinx-quickstart3"

# XXX: testing requires gui deps
#do_check() {
#  tox -e py${py3_ver/./}
#}

post_install() {
  mv "$DESTDIR/usr/bin/sphinx-apidoc" "$DESTDIR/usr/bin/sphinx-apidoc3"
  mv "$DESTDIR/usr/bin/sphinx-autogen" "$DESTDIR/usr/bin/sphinx-autogen3"
  mv "$DESTDIR/usr/bin/sphinx-build" "$DESTDIR/usr/bin/sphinx-build3"
  mv "$DESTDIR/usr/bin/sphinx-quickstart" "$DESTDIR/usr/bin/sphinx-quickstart3"
  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
