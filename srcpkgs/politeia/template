maintainer="nox"
pkgname="politeia"
version=1.3.1pre
revision=13
_gitrev="901a51599a7927506b71f302fe1b4051edb08ff0"
short_desc="Decred proposal system"
hostmakedepends="git"
tags="decred"
homepage="https://github.com/decred/politeia"
license="ISC"
distfiles="https://github.com/decred/politeia/archive/$_gitrev.tar.gz>$pkgname-$version.tar.gz"
checksum="a86ab765c60d9b756fb5e3eb228ab44b6c94d25d73fe004c5caa47b0c1863c67"
wrksrc="$pkgname-$_gitrev"
build_style="go"
go_import_path="github.com/decred/politeia"
go_package+=" $go_import_path/politeiad"
go_package+=" $go_import_path/politeiad/cmd/politeia"
go_package+=" $go_import_path/politeiad/cmd/politeia_verify"
go_package+=" $go_import_path/politeiad/cmd/politeiaimport"
go_package+=" $go_import_path/politeiawww"
go_package+=" $go_import_path/politeiawww/cmd/cmswww"
go_package+=" $go_import_path/politeiawww/cmd/piwww"
go_package+=" $go_import_path/politeiawww/cmd/politeiavoter"
go_package+=" $go_import_path/politeiawww/cmd/politeiawww_dataload"
go_package+=" $go_import_path/politeiawww/cmd/politeiawww_dbutil"
go_ldflags+=" -X github.com/decred/politeia/util/version.PreRelease=pre"
go_ldflags+=" -X github.com/decred/politeia/util/version.BuildMetadata=dev"

export GOFLAGS="-trimpath"

post_install() {
  vlicense LICENSE
  vdoc README.md
  vdoc cms-instructions.md
  vdoc politeia.md
  vdoc politeiad/sample-politeiad.conf
  vdoc politeiawww/cmd/cmswww/sample-cmswww.conf
  vdoc politeiawww/cmd/piwww/sample-piwww.conf
  vdoc politeiawww/cmd/politeiawww_dataload/sample-politeiawww_dataload.conf
  vdoc politeiawww/sample-politeiawww.conf
  vcopy examples "usr/share/doc/$pkgname"
  vcopy scripts "usr/share/doc/$pkgname"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
