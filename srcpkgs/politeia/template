maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="politeia"
version=1.3.1pre
revision=2
_gitrev="4bb033a75b45fe7453d89305228e6117c72bf1d4"
short_desc="Decred proposal system"
hostmakedepends+=" dep"
hostmakedepends+=" git"
tags="decred"
homepage="https://github.com/decred/politeia"
license="ISC"
distfiles="https://github.com/decred/politeia/archive/$_gitrev.tar.gz>$pkgname-$version.tar.gz"
checksum="fec151a101638dc41725c576c8fa6cfd2c92ed9b7592916d2c2de9ac2d1430d3"
wrksrc="$pkgname-$_gitrev"
build_style="go"
go_import_path="github.com/decred/politeia"

do_build() {
  cd "$GOSRCPATH"
  dep ensure -v
  go install -v ./...
}

post_install() {
  vlicense "$GOSRCPATH/LICENSE"
  vdoc "$GOSRCPATH/README.md"
  vdoc "$GOSRCPATH/politeia.md"
  vdoc "$GOSRCPATH/politeiad/sample-politeiad.conf"
  vdoc "$GOSRCPATH/politeiavoter/sample-politeiavoter.conf"
  vdoc "$GOSRCPATH/politeiawww/sample-politeiawww.conf"
  vdoc "$GOSRCPATH/politeiawww/cmd/politeiawww_dataload/sample-politeiawww_dataload.conf"
  vdoc "$GOSRCPATH/politeiawww/cmd/politeiawwwcli/sample-politeiawwwcli.conf"
  vcopy "$GOSRCPATH/examples" "usr/share/doc/$pkgname"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
