maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="politeia"
version=1.3.1pre
revision=1
_gitrev="5ba517958a145e693c17dc807ed775dd2251777c"
short_desc="Decred proposal system"
hostmakedepends+=" dep"
hostmakedepends+=" git"
tags="decred"
homepage="https://github.com/decred/politeia"
license="ISC"
distfiles="https://github.com/decred/politeia/archive/$_gitrev.tar.gz>$pkgname-$version.tar.gz"
checksum="1c41c5e9e73efadc9bcc3712a95b4a4c5e0ac2d7af70e0c43280f0007ab0a962"
wrksrc="$pkgname-$_gitrev"
build_style="go"
go_import_path="github.com/decred/politeia"

do_build() {
  cd "$GOSRCPATH"
  dep ensure -v
  go install -v ./...
}

post_install() {
  vlicense "$GOSRCPATH/LICENSE"
  vdoc "$GOSRCPATH/README.md"
  vdoc "$GOSRCPATH/politeia.md"
  vdoc "$GOSRCPATH/politeiad/sample-politeiad.conf"
  vdoc "$GOSRCPATH/politeiavoter/sample-politeiavoter.conf"
  vdoc "$GOSRCPATH/politeiawww/sample-politeiawww.conf"
  vdoc "$GOSRCPATH/politeiawww/cmd/politeiawww_dataload/sample-politeiawww_dataload.conf"
  vdoc "$GOSRCPATH/politeiawww/cmd/politeiawwwcli/sample-politeiawwwcli.conf"
  vcopy "$GOSRCPATH/examples" "usr/share/doc/$pkgname"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
