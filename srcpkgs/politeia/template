maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="politeia"
version=1.3.1pre
revision=3
_gitrev="c6b0be997e878b288cc9636d34e970ff950b0be4"
short_desc="Decred proposal system"
hostmakedepends+=" dep"
hostmakedepends+=" git"
tags="decred"
homepage="https://github.com/decred/politeia"
license="ISC"
distfiles="https://github.com/decred/politeia/archive/$_gitrev.tar.gz>$pkgname-$version.tar.gz"
checksum="5303bf265edc311c285c7abe0eb64582be80e8c0a957eaf68f82dfa15c74be69"
wrksrc="$pkgname-$_gitrev"
build_style="go"
go_import_path="github.com/decred/politeia"

do_build() {
  cd "$GOSRCPATH"
  dep ensure -v
  go install -v ./...
}

post_install() {
  vlicense "$GOSRCPATH/LICENSE"
  vdoc "$GOSRCPATH/README.md"
  vdoc "$GOSRCPATH/politeia.md"
  vdoc "$GOSRCPATH/politeiad/sample-politeiad.conf"
  vdoc "$GOSRCPATH/politeiavoter/sample-politeiavoter.conf"
  vdoc "$GOSRCPATH/politeiawww/sample-politeiawww.conf"
  vdoc "$GOSRCPATH/politeiawww/cmd/politeiawww_dataload/sample-politeiawww_dataload.conf"
  vdoc "$GOSRCPATH/politeiawww/cmd/politeiawwwcli/sample-politeiawwwcli.conf"
  vcopy "$GOSRCPATH/examples" "usr/share/doc/$pkgname"
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
