maintainer="nox"
pkgname="elvish"
version=0.19.2
revision=2
short_desc="Novel Unix shell"
homepage="https://elv.sh/"
license="BSD-2-Clause"
changelog="https://elv.sh/blog/$version-release-notes.html"
distfiles="https://github.com/elves/elvish/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="ef8032507c74c84369d49b098afcf1da65701aa071be9ee762f8bc456576ac94"
build_style="go"
go_import_path="src.elv.sh/cmd/elvish"
go_build_tags="netgo"
go_ldflags="-buildid="
if [[ "$XBPS_TARGET_LIBC" == "musl" ]]; then
  go_ldflags+=" -extldflags='-fuse-ld=bfd -static'"
  go_ldflags+=" -linkmode=external"
else
  # fix: collect2: fatal error: cannot find 'ld'
  go_ldflags+=" -extldflags=-fuse-ld=bfd"
fi
register_shell="/bin/elvish"

export GOFLAGS="-trimpath"

post_install() {
  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
