maintainer="nox"
pkgname="edbrowse"
version=3.8.7
revision=2
short_desc="Line-oriented text editor, web browser and mail client similar to ed(1)"
makedepends+=" libcurl-devel"
makedepends+=" pcre2-devel"
makedepends+=" quickjs-devel"
makedepends+=" readline-devel"
makedepends+=" unixodbc-devel"
hostmakedepends+=" perl"
hostmakedepends+=" pkg-config"
homepage="http://edbrowse.org/"
license="GPL-3.0-or-later, MIT"
changelog="https://github.com/CMB/edbrowse/raw/master/CHANGES"
distfiles="https://github.com/CMB/edbrowse/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="2c7f6a07e5897060527b6cc5c19c45106444e2c4d8c9799434973c352d9ce4e6"
build_style="gnu-makefile"
make_build_args+=" QUICKJS_DIR=$XBPS_CROSS_BASE/usr/include/quickjs"
make_build_args+=" QUICKJS_LDFLAGS=-lquickjs"
make_use_env="true"

if [[ -n "$XBPS_TARGET_NO_ATOMIC8" ]]; then
  make_build_args+=" QUICKJS_LDFLAGS+=-latomic"
fi

do_install() {
  vbin src/edbrowse
  vsconf doc/sample.ebrc
  vman doc/man-edbrowse-debian.1 edbrowse.1
  vdoc doc/usersguide.html
  vdoc README
  vdoc CHANGES
  vlicense COPYING
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
