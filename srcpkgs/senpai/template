maintainer="nox"
pkgname="senpai"
version=0.1.0
revision=2
short_desc="IRC client that works best with bouncers"
hostmakedepends="scdoc"
homepage="https://git.sr.ht/~taiite/senpai"
license="ISC"
distfiles="https://git.sr.ht/~taiite/senpai/archive/v$version.tar.gz>$pkgname-$version.tar.gz"
checksum="98e1f16ed97433e1e8c8bdabac1cac1920ddcab90e6cef36d8817a41b45a94ff"
build_style="go"
go_import_path="git.sr.ht/~taiite/senpai"
go_package="./cmd/senpai"
go_build_tags+=" netgo"
go_build_tags+=" osusergo"
go_ldflags="-buildid="
if [[ "$XBPS_TARGET_LIBC" == "musl" ]]; then
  go_ldflags+=" -extldflags=-static"
  go_ldflags+=" -linkmode=external"
fi

export GOFLAGS="-trimpath"

post_install() {
  scdoc <doc/senpai.1.scd >doc/senpai.1
  scdoc <doc/senpai.5.scd >doc/senpai.5
  vman doc/senpai.1
  vman doc/senpai.5
  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
