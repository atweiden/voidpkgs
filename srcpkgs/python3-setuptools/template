maintainer="nox"
pkgname="python3-setuptools"
version=52.0.0
revision=1
short_desc="Easily build and distribute Python3 packages"
depends="python3"
checkdepends+=" python3-jaraco"
checkdepends+=" python3-mock"
checkdepends+=" python3-pip"
checkdepends+=" python3-pytest-fixture-config"
checkdepends+=" python3-wheel"
hostmakedepends="python3-devel"
homepage="https://github.com/pypa/setuptools"
license="MIT"
changelog="https://github.com/pypa/setuptools/raw/master/CHANGES.rst"
distfiles="$PYPI_SITE/s/setuptools/setuptools-$version.tar.gz"
checksum="fb3a1ee622509550dbf1d419f241296169d7f09cb1eb5b1736f2f10965932b96"
wrksrc="setuptools-$version"
build_style="python3-module"
provides="python3-distribute-${version}_1"
replaces="python3-distribute>=0"

export SETUPTOOLS_INSTALL_WINDOWS_SPECIFIC_FILES=0
export SETUPTOOLS_DISABLE_VERSIONED_EASY_INSTALL_SCRIPT=1

do_check() {
  # void does not package components necessary for these tests
  python3 \
    -m pytest \
    -k 'not test_bdist_wininst_warning' \
    --ignore="setuptools/tests/test_distutils_adoption.py" \
    --ignore="setuptools/tests/test_virtualenv.py" \
    setuptools/tests
}

post_install() {
  vlicense LICENSE
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
