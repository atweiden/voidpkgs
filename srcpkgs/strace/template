maintainer="nox"
pkgname="strace"
version=5.8
revision=1
short_desc="System Call Tracer"
makedepends="libunwind-devel"
homepage="https://strace.io/"
license="LGPL-2.1-or-later"
distfiles="https://github.com/strace/strace/releases/download/v$version/$pkgname-$version.tar.xz"
checksum="df4a669f7fff9cc302784085bd4b72fab216a426a3f72c892b28a537b71e7aa9"
build_style="gnu-configure"
configure_args="--with-libunwind"

case "$XBPS_TARGET_MACHINE" in
  aarch64*|ppc64*)
    configure_args+=" --enable-mpers=no"
    ;;
  x86_64-musl)
    # work around https://github.com/strace/strace/issues/133
    configure_args+=" --enable-mpers=no"
  ;;
esac

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
