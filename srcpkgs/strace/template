maintainer="nox"
pkgname="strace"
version=5.6
revision=1
short_desc="System Call Tracer"
makedepends="libunwind-devel"
homepage="https://strace.io/"
license="LGPL-2.1-or-later"
distfiles="https://github.com/strace/strace/releases/download/v$version/$pkgname-$version.tar.xz"
checksum="189968eeae06ed9e20166ec55a830943c84374676a457c9fe010edc7541f1b01"
build_style="gnu-configure"
configure_args="--with-libunwind"

case "$XBPS_TARGET_MACHINE" in
  aarch64*|ppc64*)
    configure_args+=" --enable-mpers=no"
    ;;
  x86_64-musl)
    # work around https://github.com/strace/strace/issues/133
    configure_args+=" --enable-mpers=no"
  ;;
esac

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
