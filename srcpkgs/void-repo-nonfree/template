maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="void-repo-nonfree"
version=9
revision=4
short_desc="Void Linux drop-in file for the nonfree repository"
archs="noarch"
homepage="http://www.voidlinux.org"
license="Public Domain"
build_style="meta"

do_install() {
  vmkdir usr/share/xbps.d
  case "$XBPS_TARGET_MACHINE" in
    aarch64*)
      echo "repository=https://alpha.de.repo.voidlinux.org/current/aarch64/nonfree" > \
        "$DESTDIR/usr/share/xbps.d/10-repository-nonfree.conf"
      echo "repository=https://alpha.de.repo.voidlinux.org/current/aarch64/debug" > \
        "$DESTDIR/usr/share/xbps.d/20-repository-debug.conf"
      ;;
    *-musl)
      echo "repository=https://alpha.de.repo.voidlinux.org/current/musl/nonfree" > \
        "$DESTDIR/usr/share/xbps.d/10-repository-nonfree.conf"
      echo "repository=https://alpha.de.repo.voidlinux.org/current/musl/debug" > \
        "$DESTDIR/usr/share/xbps.d/20-repository-debug.conf"
      ;;
    *)
      echo "repository=https://alpha.de.repo.voidlinux.org/current/nonfree" > \
        "$DESTDIR/usr/share/xbps.d/10-repository-nonfree.conf"
      echo "repository=https://alpha.de.repo.voidlinux.org/current/debug" > \
        "$DESTDIR/usr/share/xbps.d/20-repository-debug.conf"
      ;;
  esac
}

void-repo-debug_package() {
  archs="noarch"
  short_desc="${short_desc/nonfree/debug}"
  pkg_install() {
    vmove usr/share/xbps.d/20-repository-debug.conf
  }
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
