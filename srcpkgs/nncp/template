maintainer="nox"
pkgname="nncp"
version=8.8.3
revision=1
short_desc="Node to Node copy, utilities for secure store-and-forward"
homepage="http://www.nncpgo.org/"
license="GPL-3.0-only"
distfiles="http://www.nncpgo.org/download/nncp-$version.tar.xz"
checksum="225750084747e970d82be0d6e6507fe47145146baad670e40b011a568eef22f1"
build_style="go"
go_import_path="cypherpunks.ru/nncp"
go_build_tags+=" netgo"
go_build_tags+=" osusergo"
go_ldflags="-buildid="
if [[ "$XBPS_TARGET_LIBC" == "musl" ]]; then
  go_ldflags+=" -extldflags=-static"
  go_ldflags+=" -linkmode=external"
fi

export GOFLAGS="-trimpath"

do_build() {
  make
}

do_install() {
  make \
    DESTDIR="$DESTDIR" \
    INFODIR="$DESTDIR/usr/share/info" \
    PREFIX="/usr" \
    install
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
