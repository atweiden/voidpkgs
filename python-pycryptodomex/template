# Template file for 'python-pycryptodomex'
maintainer="Andy Weidenbaum <archbaum@gmail.com>"
pkgname="python-pycryptodomex"
version=3.6.5
revision=1
short_desc="A self-contained Python2 package of low-level cryptographic primitives"
noarch="yes"
depends="python"
makedepends+=" python-devel"
makedepends+=" python3-devel"
hostmakedepends+=" python-setuptools"
hostmakedepends+=" python3-setuptools"
homepage="https://www.pycryptodome.org/"
license="Public Domain, BSD-2-Clause"
changelog="https://raw.githubusercontent.com/Legrandin/pycryptodome/master/Changelog.rst"
distfiles="$PYPI_SITE/p/${pkgname#python-}/${pkgname#python-}-$version.tar.gz"
checksum="ff7d28474ef2134fe3027b53fa3cf13ed5f776ce15d6209b0e48fbc7592f9396"
wrksrc="${pkgname#python-}-$version"
build_style="python-module"
pycompile_module="Crypto"
provides="python-crypto-${version}_1"
replaces="python-crypto>=0"

post_install() {
	vlicense LICENSE.rst
	vdoc README.rst
}

do_check() {
	python3 setup.py test
}

python3-pycryptodomex_package() {
	short_desc="${short_desc/Python2/Python3}"
	noarch="yes"
	depends="python3"
	pycompile_module="Crypto"
	provides="python3-crypto-${version}_1"
	replaces="python3-crypto>=0"
	pkg_install() {
		vmove usr/lib/python3*
		vlicense LICENSE.rst
		vdoc README.rst
	}
}

# vim: set filetype=sh foldmethod=marker foldlevel=0 nowrap:
